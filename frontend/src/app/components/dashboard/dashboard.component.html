<div class="dashboard-content">
  <h1>Dashboard</h1>

  <!-- Date Range Filter Toolbar -->
  <div class="search-filter-toolbar">
    <div class="toolbar-left">
      <span class="display-count">Dashboard Statistics</span>
    </div>
    <div class="toolbar-center">
      <mat-form-field appearance="outline" class="compact-filter-field">
        <mat-label>Date From</mat-label>
        <input matInput [matDatepicker]="pickerFrom" [formControl]="dateFromControl" placeholder="From">
        <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
        <mat-datepicker #pickerFrom></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="compact-filter-field">
        <mat-label>Date To</mat-label>
        <input matInput [matDatepicker]="pickerTo" [formControl]="dateToControl" placeholder="To">
        <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
        <mat-datepicker #pickerTo></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="toolbar-right">
      <button mat-icon-button (click)="applyDateFilter()" matTooltip="Apply Filter">
        <mat-icon>filter_list</mat-icon>
      </button>
      <button mat-icon-button (click)="clearDateFilter()" matTooltip="Clear">
        <mat-icon>clear</mat-icon>
      </button>
      <button mat-icon-button (click)="loadDashboardStats()" matTooltip="Refresh">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
  </div>

          <div *ngIf="loading" class="loading">
            <mat-spinner diameter="50"></mat-spinner>
          </div>

          <div *ngIf="!loading && stats" class="stats-grid">
            <mat-card class="stat-card">
              <mat-card-header>
                <mat-card-title>Total Customers</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <div class="stat-value">{{ stats.totalCustomers }}</div>
                <div class="stat-label">Active: {{ stats.activeCustomers }}</div>
              </mat-card-content>
            </mat-card>

            <mat-card class="stat-card">
              <mat-card-header>
                <mat-card-title>Today's Delivery</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <div class="stat-value">{{ stats.totalMilkDeliveredToday | number:'1.2-2' }} L</div>
              </mat-card-content>
            </mat-card>

            <mat-card class="stat-card">
              <mat-card-header>
                <mat-card-title>Today's Revenue</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <div class="stat-value">₹{{ stats.totalRevenueToday | number:'1.2-2' }}</div>
              </mat-card-content>
            </mat-card>

            <mat-card class="stat-card">
              <mat-card-header>
                <mat-card-title>Monthly Revenue</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <div class="stat-value">₹{{ stats.totalRevenueThisMonth | number:'1.2-2' }}</div>
              </mat-card-content>
            </mat-card>

            <mat-card class="stat-card">
              <mat-card-header>
                <mat-card-title>Pending Payments</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <div class="stat-value">₹{{ stats.pendingPayments | number:'1.2-2' }}</div>
                <div class="stat-label">{{ stats.pendingInvoices }} invoices</div>
              </mat-card-content>
            </mat-card>
          </div>

          <div *ngIf="!loading && stats" class="chart-container">
            <mat-card>
              <mat-card-header>
                <mat-card-title>Revenue Chart</mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <canvas baseChart
                  [data]="revenueChartData"
                  [options]="revenueChartOptions"
                  [type]="revenueChartType"
                  *ngIf="!loading">
                </canvas>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
